
# HTTPS

HTTPS整套加密机制

首先考虑最简单的加密方式：对称加密。
加密和解密用同一个秘钥的加密方式叫做对称加密。
为所有的客户端都应用同一个秘钥A，这种方式很显然是不合理的，破解了一个用户，所有的用户信息都会被盗取。

非对称加密
非对称加密会有一对秘钥：公钥和私钥。
公钥加密的内容，只有私钥可以解开，私钥加密的内容，所有的公钥都可以解开（当然是指和秘钥是一对的公钥）。

私钥只保存在服务器端，公钥可以发送给所有的客户端。

在传输公钥的过程中，肯定也会有被中间人获取的风险，但在目前的情况下，至少可以保证客户端通过公钥加密的内容，中间人是无法破解的，因为私钥只保存在服务器端，只有私钥可以破解公钥加密的内容。

现在我们还存在一个问题，如果公钥被中间人拿到篡改呢：

MITM：Man-in-the-MiddleAttack

客户端拿到的公钥是假的，如何解决这个问题？

第三方认证
公钥被掉包，是因为客户端无法分辨传回公钥的到底是中间人，还是服务器，这也是密码学中的身份验证问题。

在HTTPS中，使用 证书 + 数字签名 来解决这个问题。

浏览器安装后会内置一些权威第三方认证机构的公钥，比如VeriSign、Symantec以及GlobalSign等等，验证签名的时候直接就从本地拿到相应第三方机构的公钥，对私钥加密后的数字签名进行解密得到真正的签名，然后客户端利用签名生成规则进行签名生成，看两个签名是否匹配，如果匹配认证通过，不匹配则获取证书失败。

SSL协议是通过**非对称**密钥机制保证双方身份认证，并完成建立连接，在实际数据通信时通过**对称**密钥机制保障数据安全性